import"./style-68b0bd08.js";import{A as s,T as r,E as l}from"./common-1310fad9.js";const d="a9909bdbd7ba4789aaf0130b6e8b3b31",w="http://localhost:4173/login/login.html",a="http://localhost:4173",h="user-top-read user-follow-read playlist-read-private user-library-read",p=()=>{const o=`https://accounts.spotify.com/authorize?client_id=${d}&response_type=token&redirect_uri=${w}&scope=${h}&show_dialog=true`;window.open(o,"login","width=800,height=600")};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-to-spotify").addEventListener("click",p)});window.setItemInLocalStorage=({accessToken:o,tokenType:t,expiresIn:e})=>{localStorage.setItem(s,o),localStorage.setItem(r,t),localStorage.setItem(l,Date.now()+e*1e3),window.location.href=a};window.addEventListener("load",()=>{if(localStorage.getItem(s)&&(window.location.href=`${a}/dashboard/dashboard.html`),window.opener!=null&&!window.opener.closed){window.focus(),window.location.href.includes("error")&&window.close();const{hash:t}=window.location,e=new URLSearchParams(t),n=e.get("#access_token"),c=e.get("token_type"),i=e.get("expires_in");n?(window.close(),window.opener.setItemInLocalStorage({accessToken:n,tokenType:c,expiresIn:i})):window.close()}});
